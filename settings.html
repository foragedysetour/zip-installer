<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>设置 - 目标路径</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial; padding:18px; }
    label { display:block; margin-bottom:6px; font-weight:600; }
    #path { width:100%; padding:8px; box-sizing:border-box; margin-bottom:10px; border-radius:6px; border:1px solid #ccc; }
    .row { display:flex; gap:8px; align-items:center; }
    button { padding:8px 12px; border-radius:6px; border:none; background:#1976d2; color:#fff; cursor:pointer; }
    button.secondary { background:#607d8b; }
    .note { margin-top:8px; color:#666; font-size:12px }
  </style>
</head>
<body>
  <label>目标安装目录</label>
  <div class="row">
    <input id="path" />
    <button id="choose">选择目录</button>
  </div>
  <div style="margin-top:12px; display:flex; gap:8px;">
    <button id="save">保存</button>
    <button id="close" class="secondary">关闭</button>
  </div>
  <div class="note">选择一个目录，解压会在该目录下创建以压缩包文件名命名的文件夹。</div>
  <script>
    function init() {
      if (window.pywebview && window.pywebview.api) {
        window.pywebview.api.get_initial().then(function(p){ if(p) document.getElementById('path').value = p; });
      }

      document.getElementById('choose').addEventListener('click', function(){
        window.pywebview.api.choose().then(function(p){ if(p) document.getElementById('path').value = p; });
      });

      document.getElementById('save').addEventListener('click', function(){
        var v = document.getElementById('path').value;
        window.pywebview.api.save(v).then(function(){ window.pywebview.close(); });
      });

      document.getElementById('close').addEventListener('click', function(){ window.pywebview.close(); });
    }

    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      setTimeout(init, 1);
    } else {
      document.addEventListener('DOMContentLoaded', init);
    }
  </script>
</body>
</html>